<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Playlist dynamique</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #1e1e2f;
      color: #f0f0f0;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2rem;
    }

    h1 {
      font-size: 1.8rem;
      color: #ffcc00;
      margin-bottom: 1.5rem;
    }

    h2 {
      margin-top: 2rem;
      margin-bottom: 1rem;
      color: #4fd1c5;
      font-size: 1.2rem; /* moins gros */
    }

    .table-wrapper {
      width: 100%;
      overflow-x: auto;
      margin-bottom: 2rem;
    }

    table {
      width: auto;
      min-width: 300px;
      border-collapse: collapse;
      background-color: #2d2d44;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      margin: 0 auto;
    }

    th, td {
      padding: 8px 12px;
      text-align: left;
      border-bottom: 1px solid #444;
      white-space: nowrap;
    }

    thead {
      background-color: #3e3e5e;
    }

    tfoot {
      background-color: #3e3e5e;
      font-weight: bold;
      color: #4fd1c5;
    }

    tbody tr:hover {
      background-color: #383857;
    }

    input[type="checkbox"] {
      transform: scale(1.2);
    }

    td:nth-child(1) {
      text-align: center;
      width: 40px;
    }

    td:nth-child(2) {
      width: 200px;
    }

    td:nth-child(3) {
      width: 80px;
      text-align: center;
    }
  </style>
</head>
<body>

<h1>ðŸ”Š TOTAL = <span id="grandTotal">0:00</span></h1>

<h2>Conflictions</h2>
<div class="table-wrapper">
  <table>
    <thead>
      <tr>
        <th></th>
        <th>Song Name</th>
        <th>Time</th>
      </tr>
    </thead>
    <tbody id="conflictions"></tbody>
    <tfoot>
      <tr>
        <td colspan="2">Total Time (selected)</td>
        <td id="totalConflictions">0:00</td>
      </tr>
    </tfoot>
  </table>
</div>

<h2>Singles</h2>
<div class="table-wrapper">
  <table>
    <thead>
      <tr>
        <th></th>
        <th>Song Name</th>
        <th>Time</th>
      </tr>
    </thead>
    <tbody id="singles"></tbody>
    <tfoot>
      <tr>
        <td colspan="2">Total Time (selected)</td>
        <td id="totalSingles">0:00</td>
      </tr>
    </tfoot>
  </table>
</div>

<h2>EP - Evolve</h2>
<div class="table-wrapper">
  <table>
    <thead>
      <tr>
        <th></th>
        <th>Song Name</th>
        <th>Time</th>
      </tr>
    </thead>
    <tbody id="evolve"></tbody>
    <tfoot>
      <tr>
        <td colspan="2">Total Time (selected)</td>
        <td id="totalEvolve">0:00</td>
      </tr>
    </tfoot>
  </table>
</div>

<script>
  const songs = {
    conflictions: [
      { name: "This day is mine", time: "3:40" },
      { name: "Exposed", time: "3:45" },
      { name: "Falling", time: "4:23" },
      { name: "From the brink", time: "3:49" },
      { name: "Upon me", time: "4:46" },
      { name: "Turned to stone", time: "2:22" },
      { name: "Alone", time: "4:26" },
      { name: "Gloomflower", time: "2:41" },
      { name: "Escape", time: "4:28" },
      { name: "Dogma", time: "3:01" },
      { name: "Brainwashed", time: "4:08" },
      { name: "Bury me", time: "4:52" }
    ],
    singles: [
      { name: "Birthright", time: "3:19" },
      { name: "Stand tall", time: "3:59" }
    ],
    evolve: [
      { name: "Infectious", time: "3:20" },
      { name: "Stuck in place", time: "2:54" },
      { name: "Call to rise", time: "3:09" },
      { name: "Evolve", time: "4:02" },
      { name: "Break the frame", time: "3:34" }
    ],
	other: [
      { name: "Overthrown", time: "3:58" },
    ]
  };

  function createTable(categoryId, data, totalId) {
    const tbody = document.getElementById(categoryId);
    tbody.innerHTML = '';

    data.forEach(song => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td><input type="checkbox" class="song-checkbox"></td>
        <td>${song.name}</td>
        <td class="time">${song.time}</td>
      `;
      tbody.appendChild(row);
    });

    tbody.querySelectorAll('.song-checkbox').forEach(checkbox => {
      checkbox.addEventListener('change', () => calculateSelectedTotalTime(categoryId, totalId));
    });

    calculateSelectedTotalTime(categoryId, totalId);
  }

  function calculateSelectedTotalTime(categoryId, totalId) {
    const checkboxes = document.querySelectorAll(`#${categoryId} .song-checkbox`);
    let totalSeconds = 0;

    checkboxes.forEach(checkbox => {
      if (checkbox.checked) {
        const row = checkbox.closest('tr');
        const timeText = row.querySelector('.time').textContent.trim();
        const [minStr, secStr] = timeText.split(':');
        const minutes = parseInt(minStr) || 0;
        const seconds = parseInt(secStr) || 0;
        totalSeconds += minutes * 60 + seconds;
      }
    });

    const totalMinutes = Math.floor(totalSeconds / 60);
    const remainingSeconds = totalSeconds % 60;

    document.getElementById(totalId).textContent =
      `${totalMinutes}:${remainingSeconds.toString().padStart(2, '0')}`;

    updateGrandTotal();
  }

  function updateGrandTotal() {
    const totals = ["totalConflictions", "totalSingles", "totalEvolve"];
    let totalSeconds = 0;

    totals.forEach(id => {
      const timeText = document.getElementById(id).textContent.trim();
      const [minStr, secStr] = timeText.split(':');
      const minutes = parseInt(minStr) || 0;
      const seconds = parseInt(secStr) || 0;
      totalSeconds += minutes * 60 + seconds;
    });

    const totalMinutes = Math.floor(totalSeconds / 60);
    const remainingSeconds = totalSeconds % 60;

    document.getElementById("grandTotal").textContent =
      `${totalMinutes}:${remainingSeconds.toString().padStart(2, '0')}`;
  }

  document.addEventListener('DOMContentLoaded', () => {
    createTable('conflictions', songs.conflictions, 'totalConflictions');
    createTable('singles', songs.singles, 'totalSingles');
    createTable('evolve', songs.evolve, 'totalEvolve');
  });
</script>

</body>
</html>
